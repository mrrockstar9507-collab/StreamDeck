function makeProviderSearchLinks(title, providers) {
  const q = encodeURIComponent(title);
  const buttons = [];

  providers.forEach(p => {
    const name = p.provider_name;
    let url = "";
    switch (name) {
      case "Netflix":
        url = `https://www.netflix.com/search?q=${q}`;
        break;
      case "Hulu":
        url = `https://www.hulu.com/search?q=${q}`;
        break;
      case "Disney Plus":
        url = `https://www.disneyplus.com/search?q=${q}`;
        break;
      case "Peacock":
        url = `https://www.peacocktv.com/search?q=${q}`;
        break;
      case "Paramount Plus":
        url = `https://www.paramountplus.com/search/?q=${q}`;
        break;
      case "Crunchyroll":
        url = `https://www.crunchyroll.com/search?from=&q=${q}`;
        break;
      case "Amazon Prime Video":
      case "Prime Video":
        url = `https://www.amazon.com/s?k=${q}&i=instant-video`; // best-effort
        break;
      default:
        // fallback site search
        const domain = PROVIDER_DOMAIN[name];
        if (domain) {
          url = `https://www.google.com/search?q=site:${domain}+${q}`;
        } else {
          url = `https://www.google.com/search?q=${q}+"${encodeURIComponent(name)}"`;
        }
        break;
    }
    buttons.push(`<a class="linkbtn" target="_blank" rel="noopener" href="${url}">${safe(name)}</a>`);
  });

  // Fallback general search
  buttons.push(`<a class="linkbtn" target="_blank" rel="noopener" href="https://www.google.com/search?q=${q}+watch">Search everywhere</a>`);
  return buttons.join("");
}
